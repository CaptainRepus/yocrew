import{u as L}from"./userData-B7lMorXC.js";import{u as S}from"./login-VyhAOE5j.js";import{r as l,c as V,w as s,a as e,o as y,b as o,d as k,e as j,f as a,I as N,g as t,B as C,y as m,T as z,U as D,V as M,W as G,X as R,Y as W,Z as Y,t as $,S as H,$ as i,i as I,j as X,k as q,P as F,n as J,l as K}from"./index-_W7UznoG.js";const Q={class:"flex flex-col px-4 pt-5"},ee={class:"flex flex-col items-center text-center"},te={class:"bg-green-200 rounded-full h-24 w-24 flex items-center justify-center mb-4"},oe=["src"],se={class:"text-lg font-bold"},le={class:"text-sm text-gray-500"},ae={class:"mt-6"},ne=t("h3",{class:"text-xl font-medium text-gray-100 mb-2"},"Nastavenia",-1),re={class:"flex justify-between items-center py-2 border-b"},ce={class:"flex items-center"},ie=t("span",null,"Upozornenia",-1),de={class:"flex justify-between items-center py-2 border-b mt-2"},ue={class:"flex items-center"},me=t("a",{href:"mailto:info@wade-development.com",class:"text-white"},"Pomoc",-1),fe={class:"mt-6"},pe={class:"p-5"},_e=t("h3",{class:"text-3xl font-bold mb-10"},"Upraviť profil",-1),ve=t("h3",{class:"text-xl font-bold mb-2"},"Osobné údaje a profilová fotka",-1),he={key:0,class:"mt-4 flex justify-center"},xe=["src"],be=t("h3",{class:"text-xl font-bold mt-10"},"Zmena hesla",-1),ke={__name:"Profil",setup(we){var w;const p=((w=L())==null?void 0:w.userData)||{name:"Guest",email:"N/A"},T=l(""),_=l(""),B=l(""),f=l(!1),n=l(""),v=l(""),h=l(""),x=l(""),b=l(""),E=l(""),O=()=>{f.value=!0},U=()=>{S().logout()},d=()=>{f.value=!1,n.value=""},A=u=>{const r=u.target.files[0];r&&(n.value=URL.createObjectURL(r),console.log("Profile picture selected:",r))},Z=async()=>{const{value:u}=await F.get({key:"access_token"});if(_.value&&_.value!==B.value){alert("New password and confirmation do not match.");return}T.value;const r={name:v.value,email:h.value,oldPassword:x.value,newPassword:b.value,profilePicture:n.value};try{const c=await J.post("https://api.wade-development.com/api/YoCrew/App/edit-profile",r,{headers:{Authorization:"Bearer ".concat(u),Accept:"application/json"}});console.log("Profile saved successfully",c),d()}catch(c){console.error("Error saving profile:",c)}};return(u,r)=>{const c=K("router-link");return y(),V(e(q),null,{default:s(()=>[o(e(N),{translucent:!0},{default:s(()=>[o(e(k),null,{default:s(()=>[o(e(j),null,{default:s(()=>[a("Profil")]),_:1})]),_:1})]),_:1}),o(e(X),{fullscreen:!0},{default:s(()=>{var g,P;return[o(e(N),{collapse:"condense",class:"mt-[-0.5rem]"},{default:s(()=>[o(e(k),null,{default:s(()=>[o(e(j),{size:"large"},{default:s(()=>[a("Profil")]),_:1})]),_:1})]),_:1}),t("div",Q,[t("div",ee,[t("div",te,[t("img",{src:n.value||"",alt:"Avatar",class:"rounded-full h-20 w-20"},null,8,oe)]),t("h2",se,C(((g=e(p))==null?void 0:g.name)||"Guest"),1),t("p",le,C(((P=e(p))==null?void 0:P.email)||"N/A"),1),t("button",{class:"flex justify-center items-center py-3 w-1/2 text-lg text-center bg-green-500 border border-green-900 rounded-lg mt-4 md:mt-0 active:bg-green-700 max-md:mb-3",color:"primary",onClick:O},[o(e(m),{icon:e(z),slot:"start"},null,8,["icon"]),a(" Upraviť profil ")])]),t("div",ae,[ne,t("div",re,[t("div",ce,[o(e(m),{icon:e(D),class:"mr-2"},null,8,["icon"]),ie]),o(e(M),{slot:"end",checked:""})]),t("div",de,[t("div",ue,[o(e(m),{icon:e(G),class:"mr-2"},null,8,["icon"]),me])])]),t("div",fe,[t("button",{class:"flex justify-center items-center py-3 w-full text-lg text-center bg-red-500 border border-red-900 rounded-lg mt-2 md:mt-0 active:bg-red-700 max-md:mb-3",onClick:U},[o(e(m),{icon:e(R),slot:"start",class:"me-2"},null,8,["icon"]),a(" Odhlásiť sa ")])])]),o(e(W),{"is-open":f.value,onWillDismiss:d},{default:s(()=>[t("div",pe,[_e,ve,o(e(Y),null,{default:s(()=>[a("Nastaviť profilovú fotku")]),_:1}),t("input",{type:"file",onChange:A,accept:"image/*"},null,32),n.value?(y(),$("div",he,[t("img",{src:n.value,alt:"Profile Picture Preview",class:"rounded-full h-24 w-24 object-cover"},null,8,xe)])):H("",!0),o(e(i),{class:"text-xl",mode:"md",label:"Zmena mena","label-placement":"stacked",ref_key:"inputName",ref:v,type:"text",placeholder:"Tvoje meno"},null,512),o(e(i),{class:"text-xl",mode:"md",label:"Zmena emailu","label-placement":"stacked",ref_key:"inputEmail",ref:h,type:"email",placeholder:"Tvoj nový email"},null,512),be,o(c,{to:"/reset-password",class:"text-sm text-green-500 mb-3",onClick:d},{default:s(()=>[a(" Zabudol si heslo? ")]),_:1}),o(e(i),{class:"text-xl",mode:"md",label:"Tvoje staré heslo","label-placement":"stacked",ref_key:"inputOldPassword",ref:x,type:"pasword",placeholder:"Tu nahoď svoje staré heslo"},null,512),o(e(i),{class:"text-xl",mode:"md",label:"Tvoje nové heslo","label-placement":"stacked",ref_key:"inputNewPassword",ref:b,type:"password",placeholder:"Tu nahoď svoje nové heslo"},null,512),o(e(i),{class:"text-xl mb-10",mode:"md",label:"Potvrď svoje nové heslo","label-placement":"stacked",ref_key:"inputNewPasswordConfirm",ref:E,type:"password",placeholder:"Tu nahoď svoje nové heslo znova"},null,512),o(e(I),{expand:"block",color:"primary",class:"mt-4",onClick:Z},{default:s(()=>[a(" Uložiť ")]),_:1}),o(e(I),{expand:"block",color:"light",class:"mt-2",onClick:d},{default:s(()=>[a(" Zrušiť ")]),_:1})])]),_:1},8,["is-open"])]}),_:1})]),_:1})}}};export{ke as default};
