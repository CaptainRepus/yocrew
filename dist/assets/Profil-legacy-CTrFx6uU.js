System.register(["./userData-legacy-Odf8mh-m.js","./login-legacy-sVPoOfc8.js","./index-legacy-DE7F8EDg.js"],(function(e,l){"use strict";var t,a,s,o,n,r,c,i,d,u,m,f,v,p,x,b,h,y,g,w,k,j,_,P,C,N,T,U,A,Z,z;return{setters:[e=>{t=e.u},e=>{a=e.u},e=>{s=e.r,o=e.c,n=e.w,r=e.u,c=e.o,i=e.a,d=e.b,u=e.d,m=e.e,f=e.I,v=e.f,p=e.B,x=e.y,b=e.T,h=e.U,y=e.V,g=e.W,w=e.X,k=e.Y,j=e.Z,_=e.t,P=e.S,C=e.$,N=e.h,T=e.i,U=e.j,A=e.P,Z=e.n,z=e.l}],execute:function(){const l={class:"flex flex-col px-4 pt-5"},O={class:"flex flex-col items-center text-center"},D={class:"bg-green-200 rounded-full h-24 w-24 flex items-center justify-center mb-4"},B=["src"],E={class:"text-lg font-bold"},G={class:"text-sm text-gray-500"},L={class:"mt-6"},R=v("h3",{class:"text-xl font-medium text-gray-100 mb-2"},"Nastavenia",-1),S={class:"flex justify-between items-center py-2 border-b"},W={class:"flex items-center"},Y=v("span",null,"Upozornenia",-1),$={class:"flex justify-between items-center py-2 border-b mt-2"},I={class:"flex items-center"},V=v("a",{href:"mailto:info@wade-development.com",class:"text-white"},"Pomoc",-1),X={class:"mt-6"},q={class:"p-5"},F=v("h3",{class:"text-3xl font-bold mb-10"},"Upraviť profil",-1),H=v("h3",{class:"text-xl font-bold mb-2"},"Osobné údaje a profilová fotka",-1),J={key:0,class:"mt-4 flex justify-center"},K=["src"],M=v("h3",{class:"text-xl font-bold mt-10"},"Zmena hesla",-1);e("default",{__name:"Profil",setup(e){var Q;const ee=(null===(Q=t())||void 0===Q?void 0:Q.userData)||{name:"Guest",email:"N/A"},le=s(""),te=s(""),ae=s(""),se=s(!1),oe=s(""),ne=s(""),re=s(""),ce=s(""),ie=s(""),de=s(""),ue=()=>{se.value=!0},me=()=>{a().logout()},fe=()=>{se.value=!1,oe.value=""},ve=e=>{const l=e.target.files[0];l&&(oe.value=URL.createObjectURL(l),console.log("Profile picture selected:",l))},pe=async()=>{const{value:e}=await A.get({key:"access_token"});if(te.value&&te.value!==ae.value)return void alert("New password and confirmation do not match.");le.value;const l={name:ne.value,email:re.value,oldPassword:ce.value,newPassword:ie.value,profilePicture:oe.value};try{const t=await Z.post("https://api.wade-development.com/api/YoCrew/App/edit-profile",l,{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});console.log("Profile saved successfully",t),fe()}catch(t){console.error("Error saving profile:",t)}};return(e,t)=>{const a=z("router-link");return c(),o(r(U),null,{default:n((()=>[i(r(f),{translucent:!0},{default:n((()=>[i(r(d),null,{default:n((()=>[i(r(u),null,{default:n((()=>[m("Profil")])),_:1})])),_:1})])),_:1}),i(r(T),{fullscreen:!0},{default:n((()=>{var e,t;return[i(r(f),{collapse:"condense",class:"mt-[-0.5rem]"},{default:n((()=>[i(r(d),null,{default:n((()=>[i(r(u),{size:"large"},{default:n((()=>[m("Profil")])),_:1})])),_:1})])),_:1}),v("div",l,[v("div",O,[v("div",D,[v("img",{src:oe.value||"",alt:"Avatar",class:"rounded-full h-20 w-20"},null,8,B)]),v("h2",E,p((null===(e=r(ee))||void 0===e?void 0:e.name)||"Guest"),1),v("p",G,p((null===(t=r(ee))||void 0===t?void 0:t.email)||"N/A"),1),v("button",{class:"flex justify-center items-center py-3 w-1/2 text-lg text-center bg-green-500 border border-green-900 rounded-lg mt-4 md:mt-0 active:bg-green-700 max-md:mb-3",color:"primary",onClick:ue},[i(r(x),{icon:r(b),slot:"start"},null,8,["icon"]),m(" Upraviť profil ")])]),v("div",L,[R,v("div",S,[v("div",W,[i(r(x),{icon:r(h),class:"mr-2"},null,8,["icon"]),Y]),i(r(y),{slot:"end",checked:""})]),v("div",$,[v("div",I,[i(r(x),{icon:r(g),class:"mr-2"},null,8,["icon"]),V])])]),v("div",X,[v("button",{class:"flex justify-center items-center py-3 w-full text-lg text-center bg-red-500 border border-red-900 rounded-lg mt-2 md:mt-0 active:bg-red-700 max-md:mb-3",onClick:me},[i(r(x),{icon:r(w),slot:"start",class:"me-2"},null,8,["icon"]),m(" Odhlásiť sa ")])])]),i(r(k),{"is-open":se.value,onWillDismiss:fe},{default:n((()=>[v("div",q,[F,H,i(r(j),null,{default:n((()=>[m("Nastaviť profilovú fotku")])),_:1}),v("input",{type:"file",onChange:ve,accept:"image/*"},null,32),oe.value?(c(),_("div",J,[v("img",{src:oe.value,alt:"Profile Picture Preview",class:"rounded-full h-24 w-24 object-cover"},null,8,K)])):P("",!0),i(r(C),{class:"text-xl",mode:"md",label:"Zmena mena","label-placement":"stacked",ref_key:"inputName",ref:ne,type:"text",placeholder:"Tvoje meno"},null,512),i(r(C),{class:"text-xl",mode:"md",label:"Zmena emailu","label-placement":"stacked",ref_key:"inputEmail",ref:re,type:"email",placeholder:"Tvoj nový email"},null,512),M,i(a,{to:"/reset-password",class:"text-sm text-green-500 mb-3",onClick:fe},{default:n((()=>[m(" Zabudol si heslo? ")])),_:1}),i(r(C),{class:"text-xl",mode:"md",label:"Tvoje staré heslo","label-placement":"stacked",ref_key:"inputOldPassword",ref:ce,type:"pasword",placeholder:"Tu nahoď svoje staré heslo"},null,512),i(r(C),{class:"text-xl",mode:"md",label:"Tvoje nové heslo","label-placement":"stacked",ref_key:"inputNewPassword",ref:ie,type:"password",placeholder:"Tu nahoď svoje nové heslo"},null,512),i(r(C),{class:"text-xl mb-10",mode:"md",label:"Potvrď svoje nové heslo","label-placement":"stacked",ref_key:"inputNewPasswordConfirm",ref:de,type:"password",placeholder:"Tu nahoď svoje nové heslo znova"},null,512),i(r(N),{expand:"block",color:"primary",class:"mt-4",onClick:pe},{default:n((()=>[m(" Uložiť ")])),_:1}),i(r(N),{expand:"block",color:"light",class:"mt-2",onClick:fe},{default:n((()=>[m(" Zrušiť ")])),_:1})])])),_:1},8,["is-open"])]})),_:1})])),_:1})}}})}}}));
